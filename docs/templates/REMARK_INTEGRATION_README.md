# ะะฝัะตะณัะฐัะธั remark-slate-transformer ะดะปั ะบัะฐัะธะฒะพะณะพ ะพัะพะฑัะฐะถะตะฝะธั

ะะพะปะฝะฐั ะธะฝัะตะณัะฐัะธั ั `remark-slate-transformer` ะดะปั ะบัะฐัะธะฒะพะณะพ ะพัะพะฑัะฐะถะตะฝะธั ะฒัะตั ัะปะตะผะตะฝัะพะฒ: ัะฐะฑะปะธั, ัะฒะตัะฝะพะณะพ ัะตะบััะฐ, ะทะฐะณะพะปะพะฒะบะพะฒ ะธ ะดััะณะธั ัะปะตะผะตะฝัะพะฒ markdown.

## ๐ฏ ะงัะพ ะดะพะฑะฐะฒะปะตะฝะพ

### 1. **Enhanced Template Converter** 
- `apps/web/src/lib/enhanced-template-converter.ts`
- ะัะฟะพะปัะทัะตั `remark-slate-transformer` ะดะปั ะบะพะฝะฒะตััะฐัะธะธ markdown ะฒ Slate
- ะะพะดะดะตัะถะธะฒะฐะตั ะฒัะต ัะปะตะผะตะฝัั: ะทะฐะณะพะปะพะฒะบะธ, ัะฐะฑะปะธัั, ัะฟะธัะบะธ, ัััะปะบะธ, ัะธัะฐัั, ะบะพะด
- ะะฒัะพะผะฐัะธัะตัะบะพะต ะฒัะดะตะปะตะฝะธะต ะฟะตัะตะผะตะฝะฝัั ัะฒะตัะพะผ
- ะัะฐัะธะฒะพะต ัะพัะผะฐัะธัะพะฒะฐะฝะธะต ะบะพะฝัะฐะบัะฝะพะน ะธะฝัะพัะผะฐัะธะธ

### 2. **ะะฐััะธัะตะฝะฝะฐั ะฟะพะดะดะตัะถะบะฐ ัะฐะฑะปะธั**
- ะะฐััะพััะธะต HTML ัะฐะฑะปะธัั ะฒ rich-text-editor
- ะะพะดะดะตัะถะบะฐ ัะธะฟะพะฒ `table`, `table-row`, `table-cell`
- ะกัะธะปะธะทะฐัะธั ั ะณัะฐะฝะธัะฐะผะธ ะธ ะพััััะฟะฐะผะธ
- ะะฒัะพะผะฐัะธัะตัะบะฐั ะบะพะฝะฒะตััะฐัะธั ะธะท markdown ัะฐะฑะปะธั

### 3. **ะฃะปัััะตะฝะฝะพะต ะพัะพะฑัะฐะถะตะฝะธะต ะฟะตัะตะผะตะฝะฝัั**
- ะะตัะตะผะตะฝะฝัะต ะฒัะดะตะปััััั ะถะตะปััะผ ัะพะฝะพะผ (`#fef3c7`)
- ะะพัะธัะฝะตะฒัะน ัะตะบัั ะดะปั ะฟะตัะตะผะตะฝะฝัั (`#92400e`)
- ะะฝัะพัะผะฐัะธะพะฝะฝัะน ะฑะปะพะบ ั ะพะฟะธัะฐะฝะธะตะผ ะดะพัััะฟะฝัั ะฟะตัะตะผะตะฝะฝัั
- ะฆะฒะตัะพะฒะฐั ะธะฝะดะธะบะฐัะธั ะพะฑัะทะฐัะตะปัะฝัั/ะฝะตะพะฑัะทะฐัะตะปัะฝัั ะฟะตัะตะผะตะฝะฝัั

### 4. **ะะพะดะดะตัะถะบะฐ ะฒัะตั markdown ัะปะตะผะตะฝัะพะฒ**
- โ ะะฐะณะพะปะพะฒะบะธ (H1-H6)
- โ ะะธัะฝัะน, ะบัััะธะฒ, ะฟะพะดัะตัะบะธะฒะฐะฝะธะต, ะทะฐัะตัะบะธะฒะฐะฝะธะต
- โ ะกะฟะธัะบะธ (ะฝัะผะตัะพะฒะฐะฝะฝัะต ะธ ะผะฐัะบะธัะพะฒะฐะฝะฝัะต)
- โ ะขะฐะฑะปะธัั ั ะฟะพะปะฝัะผ ัะพัะผะฐัะธัะพะฒะฐะฝะธะตะผ
- โ ะกััะปะบะธ
- โ ะฆะธัะฐัั (blockquote)
- โ ะะปะพะบะธ ะบะพะดะฐ
- โ ะฆะฒะตัะฝะพะน ัะตะบัั ะธ ัะพะฝ
- โ ะะพัะธะทะพะฝัะฐะปัะฝัะต ะปะธะฝะธะธ

## ๐ ะะฐะบ ััะพ ัะฐะฑะพัะฐะตั

### ะะพะฝะฒะตััะฐัะธั ัะฐะฑะปะพะฝะฐ ะฒ markdown

```typescript
// 1. ะจะฐะฑะปะพะฝ ะฟัะตะพะฑัะฐะทัะตััั ะฒ markdown
const markdown = this.templateToMarkdown(template, data);

// ะัะธะผะตั ัะตะทัะปััะฐัะฐ:
`
# ะะพะผะผะตััะตัะบะพะต ะฟัะตะดะปะพะถะตะฝะธะต

- ะขะะ "ะะพั ะบะพะผะฟะฐะฝะธั" ะะปะผะฐัั
- ะขะตะปะตัะพะฝ: +7 (777) 123-45-67
- E-Mail: info@company.kz

---

## ะขะะ "ะะปะธะตะฝั"

### ะะพะผะผะตััะตัะบะพะต ะฟัะตะดะปะพะถะตะฝะธะต

| # | ะะฐะธะผะตะฝะพะฒะฐะฝะธะต | ะกัะพะธะผะพััั, ัะตะฝะณะต |
|---|-------------|-----------------|
| 1 | ะฃัะปัะณะฐ 1    | 100,000         |
| 2 | ะฃัะปัะณะฐ 2    | 200,000         |

**ะะธัะตะบัะพั ะขะะ "ะะพั ะบะพะผะฟะฐะฝะธั" ะะฒะฐะฝะพะฒ ะ.ะ.**
`
```

### ะะพะฝะฒะตััะฐัะธั markdown ะฒ Slate

```typescript
// 2. Markdown ะบะพะฝะฒะตััะธััะตััั ะฒ Slate ั ะฟะพะผะพััั remark
const result = this.remarkProcessor.processSync(markdown);
const slateNodes = result.result as Descendant[];

// 3. ะะพะฟะพะปะฝะธัะตะปัะฝะฐั ะพะฑัะฐะฑะพัะบะฐ ะดะปั ัะปัััะตะฝะธะน
const enhancedNodes = this.enhanceSlateNodes(slateNodes, template, data);
```

### ะะตะทัะปััะฐั ะฒ Slate ัะพัะผะฐัะต

```typescript
[
  {
    type: 'heading-one',
    align: 'center',
    children: [{ text: 'ะะพะผะผะตััะตัะบะพะต ะฟัะตะดะปะพะถะตะฝะธะต', bold: true }]
  },
  {
    type: 'bulleted-list',
    children: [
      {
        type: 'list-item',
        children: [{ text: 'ะขะะ "ะะพั ะบะพะผะฟะฐะฝะธั" ะะปะผะฐัั' }]
      }
    ]
  },
  {
    type: 'table',
    className: 'document-table',
    children: [
      {
        type: 'table-row',
        children: [
          { type: 'table-cell', children: [{ text: '#' }] },
          { type: 'table-cell', children: [{ text: 'ะะฐะธะผะตะฝะพะฒะฐะฝะธะต' }] },
          { type: 'table-cell', children: [{ text: 'ะกัะพะธะผะพััั, ัะตะฝะณะต' }] }
        ]
      }
    ]
  }
]
```

## ๐จ ะะธะทัะฐะปัะฝัะต ัะปัััะตะฝะธั

### ะะตัะตะผะตะฝะฝัะต
- **ะคะพะฝ**: `#fef3c7` (ะถะตะปััะน)
- **ะขะตะบัั**: `#92400e` (ะบะพัะธัะฝะตะฒัะน)
- **ะกัะธะปั**: ะะฐะบััะณะปะตะฝะฝัะต ัะณะปั ั ะพััััะฟะฐะผะธ

### ะขะฐะฑะปะธัั
- **ะัะฐะฝะธัั**: ะกะตััะต ะณัะฐะฝะธัั ะดะปั ะฒัะตั ััะตะตะบ
- **ะััััะฟั**: 12px ะฒะฝัััะธ ััะตะตะบ
- **ะะฐะณะพะปะพะฒะบะธ**: ะะธัะฝัะน ััะธัั
- **ะจะธัะธะฝะฐ**: 100% ะพั ะบะพะฝัะตะนะฝะตัะฐ

### ะะฐะณะพะปะพะฒะบะธ
- **H1**: ะฆะตะฝััะธัะพะฒะฐะฝะฝัะน, ะถะธัะฝัะน, ะบััะฟะฝัะน ััะธัั
- **H2-H6**: ะะฐะทะปะธัะฝัะต ัะฐะทะผะตัั ั ะฟัะฐะฒะธะปัะฝัะผะธ ะพััััะฟะฐะผะธ
- **ะฆะฒะตั**: ะะฒัะพะผะฐัะธัะตัะบะฐั ะฐะดะฐะฟัะฐัะธั ะบ ัะตะผะต

### ะกะฟะธัะบะธ
- **ะะฐัะบะธัะพะฒะฐะฝะฝัะต**: ะกัะฐะฝะดะฐััะฝัะต ัะพัะบะธ
- **ะัะผะตัะพะฒะฐะฝะฝัะต**: ะฆะธััั ั ัะพัะบะฐะผะธ
- **ะััััะฟั**: ะัะฐะฒะธะปัะฝัะต ะพััััะฟั ะดะปั ะฒะปะพะถะตะฝะฝะพััะธ

## ๐ ะะพะฒัะต ะฒะพะทะผะพะถะฝะพััะธ

### 1. ะะฝัะพัะผะฐัะธะพะฝะฝัะน ะฑะปะพะบ ะฟะตัะตะผะตะฝะฝัั

```typescript
// ะะฒัะพะผะฐัะธัะตัะบะธ ะดะพะฑะฐะฒะปัะตััั ะฒ ะฝะฐัะฐะปะพ ะดะพะบัะผะตะฝัะฐ
const variablesInfo = EnhancedTemplateConverter.addVariablesInfo(template);

// ะะตะทัะปััะฐั:
๐ ะจะฐะฑะปะพะฝ: ะะพะผะผะตััะตัะบะพะต ะฟัะตะดะปะพะถะตะฝะธะต
๐ก ะะพัััะฟะฝัะต ะฟะตัะตะผะตะฝะฝัะต (ะธัะฟะพะปัะทัะนัะต ัะพัะผะฐั {{variableName}}):
โข {{companyName}} - ะะฐะทะฒะฐะฝะธะต ะบะพะผะฟะฐะฝะธะธ (ะบัะฐัะฝัะน = ะพะฑัะทะฐัะตะปัะฝะพ)
โข {{clientCompanyName}} - ะะฐะทะฒะฐะฝะธะต ะบะพะผะฟะฐะฝะธะธ ะดะปั ะะ (ะทะตะปะตะฝัะน = ะฝะตะพะฑัะทะฐัะตะปัะฝะพ)
```

### 2. ะฃะปัััะตะฝะฝะฐั ะบะพะฝะฒะตััะฐัะธั ัะตะบัะธะน

```typescript
// ะะฐะณะพะปะพะฒะบะธ
case 'header': return `# ${content}`;

// ะะพะฝัะฐะบัั ะบะฐะบ ัะฟะธัะพะบ
case 'contacts': 
  const lines = content.split('\n').filter(line => line.trim());
  return lines.map(line => `- ${line.trim()}`).join('\n');

// ะขะฐะฑะปะธัั ะฒ markdown ัะพัะผะฐัะต
case 'table': return this.tableToMarkdown(section, data);
```

### 3. ะะฒัะพะผะฐัะธัะตัะบะพะต ะฒัะดะตะปะตะฝะธะต ะฟะตัะตะผะตะฝะฝัั

```typescript
// ะ enhanceNode()
const hasVariables = child.text.includes('{{') && child.text.includes('}}');
if (hasVariables) {
  return {
    ...child,
    backgroundColor: '#fef3c7',
    color: '#92400e'
  };
}
```

## ๐ง ะัะฟะพะปัะทะพะฒะฐะฝะธะต

### ะ ัะตะดะฐะบัะพัะต ัะฐะฑะปะพะฝะพะฒ

1. **ะัะบัะพะนัะต ัะตะดะฐะบัะพั**: `/dashboard/templates/3`
2. **ะฃะฒะธะดะธัะต ัะปัััะตะฝะธั**:
   - ะะฝัะพัะผะฐัะธะพะฝะฝัะน ะฑะปะพะบ ั ะฟะตัะตะผะตะฝะฝัะผะธ ะฒ ะฝะฐัะฐะปะต
   - ะขะฐะฑะปะธัะฐ ััะปัะณ ะบะฐะบ ะฝะฐััะพััะฐั HTML ัะฐะฑะปะธัะฐ
   - ะะตัะตะผะตะฝะฝัะต ะฒัะดะตะปะตะฝั ัะฒะตัะพะผ
   - ะะฐะณะพะปะพะฒะบะธ ะฟัะฐะฒะธะปัะฝะพ ะพััะพัะผะฐัะธัะพะฒะฐะฝั
   - ะะพะฝัะฐะบัั ะฒ ะฒะธะดะต ัะฟะธัะบะฐ

### ะ ะบะพะดะต

```typescript
// ะัะฟะพะปัะทะพะฒะฐะฝะธะต ัะปัััะตะฝะฝะพะณะพ ะบะพะฝะฒะตััะตัะฐ
import EnhancedTemplateConverter from '@/lib/enhanced-template-converter';

// ะะพะฝะฒะตััะฐัะธั ัะฐะฑะปะพะฝะฐ
const slateContent = EnhancedTemplateConverter.convertTemplateToSlate(template, data);

// ะะพะฑะฐะฒะปะตะฝะธะต ะธะฝัะพัะผะฐัะธะธ ะพ ะฟะตัะตะผะตะฝะฝัั
const variablesInfo = EnhancedTemplateConverter.addVariablesInfo(template);

// ะะฑัะตะดะธะฝะตะฝะธะต
const fullContent = [...variablesInfo, ...slateContent];
```

## ๐ ะกัะฐะฒะฝะตะฝะธะต ะดะพ ะธ ะฟะพัะปะต

### ะะพ (ะพะฑััะฝัะน ะบะพะฝะฒะตััะตั):
```
ะะพะผะผะตััะตัะบะพะต ะฟัะตะดะปะพะถะตะฝะธะต

ะขะะ "ะะพั ะบะพะผะฟะฐะฝะธั" ะะปะผะฐัั
ะขะตะปะตัะพะฝ: +7 (777) 123-45-67

# | ะะฐะธะผะตะฝะพะฒะฐะฝะธะต | ะกัะพะธะผะพััั
---|-------------|----------
1  | ะฃัะปัะณะฐ 1    | 100000
```

### ะะพัะปะต (remark-slate):
```
๐ ะจะฐะฑะปะพะฝ: ะะพะผะผะตััะตัะบะพะต ะฟัะตะดะปะพะถะตะฝะธะต
๐ก ะะพัััะฟะฝัะต ะฟะตัะตะผะตะฝะฝัะต:
โข {{companyName}} - ะะฐะทะฒะฐะฝะธะต ะบะพะผะฟะฐะฝะธะธ

# ะะพะผะผะตััะตัะบะพะต ะฟัะตะดะปะพะถะตะฝะธะต

โข ะขะะ "ะะพั ะบะพะผะฟะฐะฝะธั" ะะปะผะฐัั  
โข ะขะตะปะตัะพะฝ: +7 (777) 123-45-67

โโโโโฌโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโ
โ # โ ะะฐะธะผะตะฝะพะฒะฐะฝะธะตโ ะกัะพะธะผะพััั, ัะตะฝะณะตโ
โโโโโผโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโโโโค
โ 1 โ ะฃัะปัะณะฐ 1    โ 100,000 โธ      โ
โโโโโดโโโโโโโโโโโโโโดโโโโโโโโโโโโโโโโโโ
```

## ๐ฏ ะะตะทัะปััะฐั

ะขะตะฟะตัั ะฟัะธ ะพัะบัััะธะธ ะบะพะผะผะตััะตัะบะพะณะพ ะฟัะตะดะปะพะถะตะฝะธั ะฒ ัะตะดะฐะบัะพัะต ะฒั ัะฒะธะดะธัะต:

1. **ะัะฐัะธะฒัะต ัะฐะฑะปะธัั** - ะฝะฐััะพััะธะต HTML ัะฐะฑะปะธัั ั ะณัะฐะฝะธัะฐะผะธ
2. **ะัะดะตะปะตะฝะฝัะต ะฟะตัะตะผะตะฝะฝัะต** - ะถะตะปััะน ัะพะฝ ะดะปั ะฒัะตั {{ะฟะตัะตะผะตะฝะฝัั}}
3. **ะัะฐะฒะธะปัะฝัะต ะทะฐะณะพะปะพะฒะบะธ** - H1, H2, H3 ั ัะพะพัะฒะตัััะฒัััะธะผะธ ัะฐะทะผะตัะฐะผะธ
4. **ะะฝัะพัะผะฐัะธะฒะฝัะน ะฑะปะพะบ** - ัะฟะธัะพะบ ะฒัะตั ะดะพัััะฟะฝัั ะฟะตัะตะผะตะฝะฝัั
5. **ะฆะฒะตัะพะฒัั ะธะฝะดะธะบะฐัะธั** - ะบัะฐัะฝัะน ะดะปั ะพะฑัะทะฐัะตะปัะฝัั, ะทะตะปะตะฝัะน ะดะปั ะฝะตะพะฑัะทะฐัะตะปัะฝัั
6. **ะกัััะบัััะธัะพะฒะฐะฝะฝัะต ะบะพะฝัะฐะบัั** - ะฒ ะฒะธะดะต ะผะฐัะบะธัะพะฒะฐะฝะฝะพะณะพ ัะฟะธัะบะฐ
7. **ะะพัะธะทะพะฝัะฐะปัะฝัะต ะปะธะฝะธะธ** - ะฒะผะตััะพ ะฟะพะดัะตัะบะธะฒะฐะฝะธะน

---

**ะกะธััะตะผะฐ ัะตะฟะตัั ะธัะฟะพะปัะทัะตั remark-slate-transformer ะดะปั ะผะฐะบัะธะผะฐะปัะฝะพ ะบัะฐัะธะฒะพะณะพ ะพัะพะฑัะฐะถะตะฝะธั ะฒัะตั ัะปะตะผะตะฝัะพะฒ!** ๐

### ๐ ะขะตััะธัะพะฒะฐะฝะธะต

1. ะัะบัะพะนัะต `/dashboard/templates`
2. ะะฐะถะผะธัะต ะฝะฐ "ะะพะผะผะตััะตัะบะพะต ะฟัะตะดะปะพะถะตะฝะธะต"
3. ะะฐัะปะฐะถะดะฐะนัะตัั ะบัะฐัะธะฒัะผ ะพัะพะฑัะฐะถะตะฝะธะตะผ ั ัะฐะฑะปะธัะฐะผะธ, ัะฒะตัะฝัะผะธ ะฟะตัะตะผะตะฝะฝัะผะธ ะธ ะฟัะฐะฒะธะปัะฝัะผ ัะพัะผะฐัะธัะพะฒะฐะฝะธะตะผ!
